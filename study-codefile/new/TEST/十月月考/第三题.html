<!DOCTYPE html>
<html lang="zh-CN">

    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <link rel="stylesheet" href="./css/bootstrap.min.css">
        <link rel="stylesheet" href="./css/bootstrap-icons.css">
        <title>导航栏和登录注册模态框</title>
        <style>
            /* body:before{
                content: "\6f58\4f73\5b9d\0031\0031\002f\0032\0030\6c34\5370";
                font-size: 80px;
                color: rgba(255, 192, 203, 0.792);
                z-index: -1;
            } */
            .modal-header {
                text-align: center;
            }

            .btn-group {
                display: flex;
                justify-content: space-between;
            }
        </style>
    </head>

    <body>

        <nav class="navbar navbar-expand-lg navbar-light bg-light">
            <div class="container-fluid">
                <img src="./img/logo.png" alt="" class="navbar-brand" style="width: 2%;">
                <a class="navbar-brand" href="#" >北京工商管理专修学院</a> 
                <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav"
                    aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
                    <span class="navbar-toggler-icon"></span>
                </button>
                <div class="collapse navbar-collapse" id="navbarNav">
                    <ul class="navbar-nav">
                        <ul class="navbar-nav">
                            <!-- <li class="navbar-brand">
                                <a class="navbar-brand" href="#" style="color: white;">Logo</a>
                            </li> -->
                            <li class="nav-item">
                                <a class="nav-link active" aria-current="page" href="#" style="color: rgb(0, 162, 255);">首页</a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link" href="#">列表</a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link" href="#">联系我们</a>
                            </li>
                        </ul>

                        <li class="nav-item dropdown">
                            <a class="nav-link dropdown-toggle" href="#" role="button" data-bs-toggle="dropdown"
                                aria-expanded="false">
                                登录注册
                            </a>
                            <ul class="dropdown-menu">
                                <li><a class="dropdown-item" href="#" id="login-btn" data-bs-toggle="modal"
                                        data-bs-target="#loginRegisterModal">登录</a></li>
                                <li><a class="dropdown-item" href="#" id="sign-in-btn" data-bs-toggle="modal"
                                        data-bs-target="#loginRegisterModal">注册</a></li>
                            </ul>
                        </li>
                    </ul>
                </div>
            </div>
        </nav>
        <main>
            <div id="carouselExampleCaptions" class="carousel slide" data-bs-ride="carousel">
                <div class="carousel-indicators">
                    <button type="button" data-bs-target="#carouselExampleCaptions" data-bs-slide-to="0" class="active"
                        aria-current="true" aria-label="Slide 1"></button>
                    <button type="button" data-bs-target="#carouselExampleCaptions" data-bs-slide-to="1"
                        aria-label="Slide 2"></button>
                    <button type="button" data-bs-target="#carouselExampleCaptions" data-bs-slide-to="2"
                        aria-label="Slide 3"></button>
                </div>
                <div class="carousel-inner">
                    <div class="carousel-item active">
                        <img src="" class="d-block w-100 c-img">
                        <div class="carousel-caption d-none d-md-block">
                            <h5>First slide label</h5>
                            <p>Some representative placeholder content for the first slide.</p>
                        </div>
                    </div>
                    <div class="carousel-item">
                        <img src="" class="d-block w-100 c-img">
                        <div class="carousel-caption d-none d-md-block">
                            <h5>Second slide label</h5>
                            <p>Some representative placeholder content for the second slide.</p>
                        </div>
                    </div>
                    <div class="carousel-item">
                        <img src="" class="d-block w-100 c-img">
                        <div class="carousel-caption d-none d-md-block">
                            <h5>Third slide label</h5>
                            <p>Some representative placeholder content for the third slide.</p>
                        </div>
                    </div>
                </div>
                <button class="carousel-control-prev" type="button" data-bs-target="#carouselExampleCaptions" data-bs-slide="prev">
                    <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                    <span class="visually-hidden">Previous</span>
                </button>
                <button class="carousel-control-next" type="button" data-bs-target="#carouselExampleCaptions" data-bs-slide="next">
                    <span class="carousel-control-next-icon" aria-hidden="true"></span>
                    <span class="visually-hidden">Next</span>
                </button>
            </div>
        </main>
        <!-- 登录/注册 模态框 -->
        <div class="modal fade" id="loginRegisterModal" tabindex="-1" aria-labelledby="loginRegisterModalLabel"
            aria-hidden="true">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-header">
                        <h5 class="modal-title" id="loginRegisterModalLabel">登录/注册</h5>
                        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="关闭"></button>
                    </div>
                    <div class="modal-body">
                        <!-- 登录和注册的选项卡 -->
                        <ul class="nav nav-tabs" id="loginRegisterTabs" role="tablist">
                            <li class="nav-item" role="presentation">
                                <a class="nav-link active" id="login-tab" data-bs-toggle="tab" href="#login" role="tab"
                                    aria-controls="login" aria-selected="true">登录</a>
                            </li>
                            <li class="nav-item" role="presentation">
                                <a class="nav-link" id="register-tab" data-bs-toggle="tab" href="#register" role="tab"
                                    aria-controls="register" aria-selected="false">注册</a>
                            </li>
                        </ul>

                        <!-- 登录和注册的选项卡内容 -->
                        <div class="tab-content mt-2">
                            <!-- 登录选项卡内容 -->
                            <div class="tab-pane fade show active" id="login" role="tabpanel" aria-labelledby="login-tab">
                                <form class="needs-validation" novalidate>
                                    <div class="mb-3">
                                        <label for="loginUsername" class="form-label">用户名</label>
                                        <input type="text" class="form-control" id="loginUsername" required>
                                        <div class="invalid-feedback">
                                            请输入用户名。
                                        </div>
                                    </div>
                                    <div class="mb-3">
                                        <label for="loginPassword" class="form-label">密码</label>
                                        <input type="password" class="form-control" id="loginPassword" required>
                                        <div class="invalid-feedback">
                                            请输入密码。
                                        </div>
                                    </div>
                                    <div class="form-check mb-3">
                                        <input type="checkbox" class="form-check-input" id="loginAgreeCheck" required>
                                        <label class="form-check-label" for="loginAgreeCheck">我同意相关条款和条件</label>
                                        <div class="invalid-feedback">
                                            您必须同意相关条款和条件。
                                        </div>
                                    </div>
                                    <button type="submit" class="btn btn-primary">登录</button>
                                </form>
                            </div>

                            <!-- 注册选项卡内容 -->
                            <div class="tab-pane fade" id="register" role="tabpanel" aria-labelledby="register-tab">
                                <form class="needs-validation" novalidate>
                                    <div class="mb-3">
                                        <label for="registerUsername" class="form-label">用户名</label>
                                        <input type="text" class="form-control" id="registerUsername" required>
                                        <div class="invalid-feedback">
                                            请输入用户名。
                                        </div>
                                    </div>
                                    <div class="mb-3">
                                        <label for="registerEmail" class="form-label">电子邮件</label>
                                        <input type="email" class="form-control" id="registerEmail" required>
                                        <div class="invalid-feedback">
                                            请输入有效的电子邮件地址。
                                        </div>
                                    </div>
                                    <div class="mb-3">
                                        <label for="registerPassword" class="form-label">密码</label>
                                        <input type="password" class="form-control" id="registerPassword" required
                                            pattern=".{6,}" title="六个或更多字符">
                                        <div class="invalid-feedback">
                                            请输入至少六个字符的密码。
                                        </div>
                                    </div>
                                    <button type="submit" class="btn btn-success">注册</button>
                                </form>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <script src="./js/bootstrap.bundle.js"></script>
        <script src="./js/jquery-1.12.4.js"></script>
        <script>
            // 默认选中登录标签
            document.getElementById('login-tab').click();

            // 启用 Bootstrap 表单验证
            (function () {
                'use strict';

                // 获取所有需要验证的表单
                var forms = document.querySelectorAll('.needs-validation');

                // 循环添加提交事件监听器
                Array.from(forms).forEach(function (form) {
                    form.addEventListener('submit', function (event) {
                        if (!form.checkValidity()) {
                            event.preventDefault();
                            event.stopPropagation();
                        }

                        form.classList.add('was-validated');
                    }, false);
                });
            })();
            var c_img = document.querySelectorAll('.c-img');
            var c_img_box = document.querySelector('.carousel-inner')
            $.ajax(
                {
                    url: "3.json",
                    type: 'GET',
                    dataType: 'text',
                    success: function (data) {
                        console.log(data);
                        var data = JSON.parse(data);
                        // // 直接读取设置图片路径    
                        // if(data.code == 200){
                        //     console.log(data.arr.length)
                        //     for(var i = 0;i < data.arr.length;i++){
                        //         console.log(data.arr[i].img)
                        //         c_img[i].src = data.arr[i].img;
                        //     }
                        // }else{
                        //     alert('请求失败');
                        // }
                        
                        // ``包内容注入body
                        if(data.code == 200){
                            var imgHtml = "";
                            var c_arr = data.arr;
                            if(c_arr != null && c_arr.length > 0){
                                console.log(c_arr.length)
                                for(var i = 0; i < c_arr.length; i++){
                                    if(i == 0){
                                        imgHtml += `<div class="carousel-item active">
                                                    <img src="${c_arr[i].img}" class="d-block w-100 c-img">
                                                    <div class="carousel-caption d-none d-md-block">
                                                        <h5>${c_arr[i].title}</h5>
                                                        <p>${c_arr[i].content}</p>
                                                    </div>
                                                </div>`;
                                    }else{
                                        imgHtml += `<div class="carousel-item">
                                                    <img src="${c_arr[i].img}" class="d-block w-100 c-img">
                                                    <div class="carousel-caption d-none d-md-block">
                                                        <h5>${c_arr[i].title}</h5>
                                                        <p>${c_arr[i].content}</p>
                                                    </div>
                                                </div>`;
                                    }
                                }
                                console.log(imgHtml);
                                c_img_box.innerHTML = imgHtml;
                            }
                        }else{
                            alert('请求失败');
                        }
                    }
                }
            )
            
        </script>

    </body>

</html>