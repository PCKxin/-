<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title></title>
    <style type="text/css">
      *{
        margin: 0;
        padding: 0;
        }
        #box{
          width: 100px;
          height: 100px;
          background-color: black;
          position: absolute;
          left: 0;
          top: 0;
        }
    </style>
  </head>
  <body>
    <div id="box"></div>
    <script type="text/javascript">
      //获取div
    var box=document.getElementById("box");
      window.onload=function(e){
        //兼容性获取event对象
        var e=e||window.event;
        box.onmousedown=function(e){
          //鼠标距离元素的距离
          var left=e.offsetX;
          // console.log("鼠标距离元素左边的距离"+left);
          var top=e.offsetY;
          // console.log("鼠标距离元素上边的距离"+top);


          document.onmousemove=function(e){
            //获取鼠标到页面的距离
            var left1=e.clientX;
            // console.log("鼠标距离页面左边的距离"+left1);
            var top1=e.clientY;
            // console.log("鼠标距离页面上边的距离"+top1);

            box.style.left=left1-left+"px";  //鼠标距离页面的距离-鼠标距离元素的距离
            // console.log("元素距离页面左边的距离"+box.style.left);
            box.style.top=top1-top+"px";

            //获取浏览器的宽度-元素的宽度
            var maxwidth=window.innerWidth-box.offsetWidth;  
            var maxheight=window.innerHeight-box.offsetHeight;

            if(box.offsetLeft<=0){
              box.style.left=0+"px"
            }else if(box.offsetLeft>=maxwidth){
              box.style.left=maxwidth+"px";
            }
            if(box.offsetTop<=0){
              box.style.top=0+"px"
            }else if(box.offsetTop>=maxheight){
              box.style.top=maxheight+"px"
            }
          }
          document.onmouseup=function(){
            document.onmousemove=null;
          }
        }
      }
    </script>
  </body>
</html>