<!DOCTYPE html>
<html lang="zh-cn">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <meta http-equiv="X-UA-Compatible" content="ie=edge">
        <title></title>
        <script src="./js/vue.js"></script>
    </head>
        <body>

            <div id="app">
                <!-- <h3 v-show="flag">这是一个标签</h3> -->
                <h3 v-demo="flag2">这是一个标签</h3>
                <button @click="changeFlag">全局自定义属性</button><br>

                <!-- 显示隐藏 -->
                <h3 v-demo="flag">显示</h3>
                <button @click="flag = !flag">显示隐藏</button>
            </div>

            <script>
                Vue.config.productionTip = false;

                // 全局自定义指令
                Vue.directive('demo', {
                    // 当被绑定的元素插入到 DOM 中时……
                    inserted(el, binding, vnode, oldVnode){
                        // console.log(el);
                        // console.log(binding);
                        // console.log(vnode);
                        // console.log(oldVnode);
                        if(binding.value == true){
                            el.style.display = "block"
                        }else{
                            el.style.display = "none"
                        }
                    },
                    // 当绑定元素的父组件发生更新时，触发这个函数
                    update(el, binding, vnode, oldVnode){
                        if(binding.value == true){
                            el.style.display = "block"
                        }else{
                            el.style.display = "none"
                        }
                    }
                });
                var vm = new Vue({
                    el: '#app',
                    data:{
                        flag: true,
                        flag2: false,
                    },
                    methods:{
                        changeFlag(){
                            this.flag2 = !this.flag2;
                        }
                    }
                });
            </script>
        </body>
</html>